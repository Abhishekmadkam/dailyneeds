<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Text & Writing Tools – Pro+</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
*{font-family:'Poppins',sans-serif;}
body{background:linear-gradient(135deg,#e9eef6,#fdfefe);min-height:100vh;}
.page-wrapper{max-width:1200px;margin:auto;}
.header{background:#ffffffcc;backdrop-filter:blur(10px);border-radius:20px;padding:20px 30px;box-shadow:0 10px 30px rgba(0,0,0,.08);}
.tool-card{background:#fff;padding:30px;border-radius:20px;box-shadow:0 20px 45px rgba(0,0,0,.1);}
textarea{resize:vertical;border-radius:16px;padding:18px;font-size:15px;}
.stat-box{background:#f8f9fd;padding:18px;border-radius:16px;text-align:center;}
.stat{font-size:13px;color:#6c757d;}
.stat-value{font-size:24px;font-weight:600;}
.keyword-box{background:#f1f5ff;border-radius:14px;padding:15px;max-height:160px;overflow:auto;}
.keyword{display:flex;justify-content:space-between;font-size:14px;}
.btn{border-radius:14px;font-weight:500;}
.output-msg{min-height:24px;}

.dark body{background:#020617;color:#e5e7eb;}
.dark .tool-card,.dark .header,.dark textarea{background:#020617;color:#e5e7eb;}
.dark .stat-box{background:#020617;border:1px solid #1e293b;}
</style>
</head>

<body class="py-4">
<div class="page-wrapper px-3">

<div class="header mb-4 d-flex justify-content-between flex-wrap gap-2">
  <div>
    <h1 class="fw-bold mb-1">Text & Writing Tools</h1>
    <p class="text-muted mb-0">Professional writing & analysis workspace</p>
  </div>
  <div class="d-flex gap-2">
    <button class="btn btn-outline-dark btn-sm" onclick="toggleDark()">Dark</button>
    <button class="btn btn-outline-primary btn-sm" onclick="downloadTXT()">TXT</button>
    <button class="btn btn-outline-primary btn-sm" onclick="downloadHTML()">HTML</button>
    <button class="btn btn-outline-secondary btn-sm" onclick="undo()">Undo</button>
    <button class="btn btn-outline-secondary btn-sm" onclick="redo()">Redo</button>
  </div>
</div>

<div class="tool-card">

<textarea id="text" class="form-control mb-4" rows="9" placeholder="Start typing or paste text..."></textarea>

<div class="row g-3 mb-4">
  <div class="col-6 col-md-3"><div class="stat-box"><div class="stat">Words</div><div class="stat-value" id="words">0</div></div></div>
  <div class="col-6 col-md-3"><div class="stat-box"><div class="stat">Characters</div><div class="stat-value" id="chars">0</div></div></div>
  <div class="col-6 col-md-3"><div class="stat-box"><div class="stat">Lines</div><div class="stat-value" id="lines">0</div></div></div>
  <div class="col-6 col-md-3"><div class="stat-box"><div class="stat">Sentences</div><div class="stat-value" id="sentences">0</div></div></div>
</div>

<div class="row g-3 mb-4">
  <div class="col-md-6">
    <h6 class="fw-semibold">Keyword Density</h6>
    <div class="keyword-box" id="keywords">No data</div>
  </div>
  <div class="col-md-6">
    <h6 class="fw-semibold">Find & Replace</h6>
    <input class="form-control mb-2" id="findText" placeholder="Find">
    <input class="form-control mb-2" id="replaceText" placeholder="Replace">
    <button class="btn btn-sm btn-outline-primary" onclick="findReplace()">Replace All</button>
  </div>
</div>

<div class="d-flex flex-wrap gap-2 mb-3">
  <button class="btn btn-primary" onclick="analyze()">Analyze</button>
  <button class="btn btn-outline-secondary" onclick="toUpper()">UPPERCASE</button>
  <button class="btn btn-outline-secondary" onclick="toLower()">lowercase</button>
  <button class="btn btn-outline-secondary" onclick="toCapitalize()">Capitalize</button>
</div>

<div class="d-flex flex-wrap gap-2 mb-3">
  <button class="btn btn-warning" onclick="removeSpaces()">Remove Extra Spaces</button>
  <button class="btn btn-outline-secondary" onclick="removeEmptyLines()">Remove Empty Lines</button>
  <button class="btn btn-outline-secondary" onclick="sortLines()">Sort Lines A–Z</button>
</div>

<div class="d-flex gap-2">
  <button class="btn btn-success" onclick="copyText()">Copy</button>
  <button class="btn btn-danger" onclick="clearText()">Clear</button>
</div>

<p class="mt-3 fw-semibold text-success output-msg" id="output"></p>

</div>

<hr class="my-5">
<p class="text-center text-muted small">© 2025 FreeToolsHub – Pro+</p>
</div>

<script>
const textArea=document.getElementById('text');
let history=[],index=-1;

function saveHistory(){
  history=history.slice(0,index+1);
  history.push(textArea.value);
  if(history.length>200) history.shift();
  index=history.length-1;
}

textArea.value=localStorage.getItem('autosave')||'';
saveHistory();

textArea.addEventListener('input',()=>{
  saveHistory();
  localStorage.setItem('autosave',textArea.value);
  analyze();
});

document.addEventListener('keydown',e=>{
  if(e.ctrlKey&&e.key==='z'){e.preventDefault();undo();}
  if(e.ctrlKey&&(e.key==='y'||(e.shiftKey&&e.key==='Z'))){e.preventDefault();redo();}
});

function undo(){if(index>0){index--;textArea.value=history[index];analyze();}}
function redo(){if(index<history.length-1){index++;textArea.value=history[index];analyze();}}

function analyze(){
 const t=textArea.value;
 const words=t.trim()?t.trim().split(/\s+/).length:0;
 const sentences=t.match(/[^.!?]+[.!?]+/g)?.length||0;
 document.getElementById('words').innerText=words;
 document.getElementById('chars').innerText=t.length;
 document.getElementById('lines').innerText=t?t.split('\n').length:0;
 document.getElementById('sentences').innerText=sentences;
 keywordDensity(t);
}

function keywordDensity(t){
 if(!t.trim()){keywords.innerText='No data';return;}
 let map={};
 t.toLowerCase().match(/\b[a-z]{3,}\b/g)?.forEach(w=>map[w]=(map[w]||0)+1);
 keywords.innerHTML=Object.entries(map)
 .sort((a,b)=>b[1]-a[1]).slice(0,8)
 .map(([k,v])=>`<div class="keyword"><span>${k}</span><span>${v}</span></div>`).join('');
}

function findReplace(){
 const f=findText.value,r=replaceText.value;
 if(!f)return;
 saveHistory();
 textArea.value=textArea.value.split(f).join(r);
 analyze();
}

function removeSpaces(){saveHistory();textArea.value=textArea.value.replace(/\s+/g,' ').trim();analyze();}
function removeEmptyLines(){saveHistory();textArea.value=textArea.value.split('\n').filter(l=>l.trim()).join('\n');analyze();}
function sortLines(){saveHistory();textArea.value=textArea.value.split('\n').sort().join('\n');analyze();}
function toUpper(){saveHistory();textArea.value=textArea.value.toUpperCase();analyze();}
function toLower(){saveHistory();textArea.value=textArea.value.toLowerCase();analyze();}
function toCapitalize(){saveHistory();textArea.value=textArea.value.replace(/\b\w/g,c=>c.toUpperCase());analyze();}

function copyText(){navigator.clipboard.writeText(textArea.value);msg('Copied');}
function clearText(){saveHistory();textArea.value='';analyze();msg('Cleared');}

function downloadTXT(){download(textArea.value,'text.txt','text/plain');}
function downloadHTML(){
 const html=`<!DOCTYPE html><html><body><pre>${textArea.value.replace(/</g,'&lt;')}</pre></body></html>`;
 download(html,'text.html','text/html');
}

function download(data,name,type){
 const b=new Blob([data],{type});
 const a=document.createElement('a');
 a.href=URL.createObjectURL(b);
 a.download=name;
 a.click();
 URL.revokeObjectURL(a.href);
}

function toggleDark(){document.documentElement.classList.toggle('dark');}
function msg(m){output.innerText=m;setTimeout(()=>output.innerText='',2000);}
</script>
</body>
</html>
