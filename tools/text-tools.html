<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Text & Writing Tools – Pro+</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Professional text analysis and writing tool with advanced features">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e9eef6, #fdfefe);
            min-height: 100vh;
            padding-top: 20px;
            padding-bottom: 40px;
        }
        
        .page-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 20px;
        }
        
        .tool-card {
            background: #fff;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 45px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        textarea {
            resize: vertical;
            border-radius: 16px;
            padding: 18px;
            font-size: 15px;
            border: 1px solid #dee2e6;
            width: 100%;
            min-height: 200px;
        }
        
        textarea:focus {
            outline: none;
            border-color: #4a6bff;
            box-shadow: 0 0 0 3px rgba(74, 107, 255, 0.1);
        }
        
        .stat-box {
            background: #f8f9fd;
            padding: 18px;
            border-radius: 16px;
            text-align: center;
        }
        
        .stat {
            font-size: 13px;
            color: #6c757d;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 22px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .keyword-box {
            background: #f1f5ff;
            border-radius: 14px;
            padding: 15px;
            max-height: 180px;
            overflow-y: auto;
        }
        
        .keyword {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            margin-bottom: 8px;
            padding: 5px 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.7);
        }
        
        .keyword:last-child {
            margin-bottom: 0;
        }
        
        .btn {
            border-radius: 14px;
            font-weight: 500;
            transition: all 0.2s;
            padding: 8px 16px;
            border: none;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .output-msg {
            min-height: 24px;
            font-weight: 500;
        }
        
        .ad-space {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            font-size: 14px;
            color: #6c757d;
            margin: 20px 0;
        }
        
        /* Dark mode */
        .dark body {
            background: #020617;
            color: #e5e7eb;
        }
        
        .dark .tool-card,
        .dark .header,
        .dark textarea {
            background: #0f172a;
            color: #e5e7eb;
            border-color: #334155;
        }
        
        .dark .stat-box {
            background: #1e293b;
            border: 1px solid #334155;
        }
        
        .dark .keyword-box {
            background: #1e293b;
        }
        
        .dark .keyword {
            background: rgba(30, 41, 59, 0.7);
        }
        
        .dark .stat-value {
            color: #e5e7eb;
        }
        
        .dark .ad-space {
            background: #1e293b;
            border-color: #475569;
            color: #94a3b8;
        }
        
        /* Modal styles */
        .modal-content {
            border-radius: 20px;
            border: none;
        }
        
        .dark .modal-content {
            background: #0f172a;
            color: #e5e7eb;
        }
        
        /* Feature section */
        .feature-section {
            margin-top: 25px;
            padding-top: 25px;
            border-top: 1px solid #eaeaea;
        }
        
        .dark .feature-section {
            border-color: #334155;
        }
        
        /* Slider */
        .slider-container {
            margin: 15px 0;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        /* Progress bar */
        .progress {
            height: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .progress-bar {
            border-radius: 5px;
        }
        
        /* Summary box */
        .summary-box {
            background: #f8f9fd;
            border-radius: 14px;
            padding: 15px;
            margin-top: 15px;
            font-size: 14px;
        }
        
        .dark .summary-box {
            background: #1e293b;
        }
        
        /* Font preview */
        .font-preview {
            font-size: 18px;
            padding: 10px;
            border-radius: 10px;
            background: #f8f9fa;
            margin: 10px 0;
        }
        
        .dark .font-preview {
            background: #1e293b;
        }
        
        /* Word cloud container */
        .word-cloud-container {
            height: 200px;
            border-radius: 14px;
            background: #f8f9fd;
            padding: 15px;
            margin: 15px 0;
            overflow: auto;
        }
        
        .dark .word-cloud-container {
            background: #1e293b;
        }
        
        /* Import/Export buttons */
        .import-export-container {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 10px 0;
        }
        
        .import-btn, .export-btn {
            flex: 1;
            min-width: 150px;
        }
        
        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        /* Live word count */
        .live-word-count {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 12px;
        }
        
        /* Text area wrapper */
        .textarea-wrapper {
            position: relative;
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <!-- HEADER -->
        <div class="header d-flex justify-content-between align-items-center flex-wrap gap-3">
            <div>
                <h1 class="fw-bold mb-1"><i class="bi bi-pencil-square"></i> Text & Writing Tools</h1>
                <p class="text-muted mb-0">Professional daily writing & analysis workspace</p>
            </div>
            <div class="d-flex gap-2 flex-wrap">
                <button class="btn btn-outline-dark btn-sm" onclick="toggleDark()"><i class="bi bi-moon"></i> Dark</button>
                <button class="btn btn-outline-primary btn-sm" onclick="openImportModal()"><i class="bi bi-upload"></i> Import</button>
                <button class="btn btn-outline-primary btn-sm" onclick="downloadTXT()"><i class="bi bi-filetype-txt"></i> TXT</button>
                <button class="btn btn-outline-primary btn-sm" onclick="downloadHTML()"><i class="bi bi-filetype-html"></i> HTML</button>
                <button class="btn btn-outline-secondary btn-sm" onclick="undo()"><i class="bi bi-arrow-counterclockwise"></i> Undo</button>
                <button class="btn btn-outline-secondary btn-sm" onclick="redo()"><i class="bi bi-arrow-clockwise"></i> Redo</button>
                <button class="btn btn-outline-info btn-sm" onclick="toggleAdvanced()"><i class="bi bi-gear"></i> Advanced</button>
            </div>
        </div>
        
        <!-- TOP AD -->
        <div class="ad-space">Advertisement Space (Top Banner – AdSense Ready)</div>
        
        <!-- MAIN TOOL CARD -->
        <div class="tool-card">
            <!-- TEXT AREA -->
            <div class="textarea-wrapper mb-4">
                <textarea id="text" class="form-control" placeholder="Start typing or paste text here...">This is a sample text to demonstrate the features of Text & Writing Tools Pro+. You can analyze this text, transform it, or replace it with your own content. Try the various features like word counting, keyword analysis, and text transformations.</textarea>
                <div class="live-word-count" id="liveWordCount">11 words</div>
            </div>
            
            <!-- BASIC STATS -->
            <div class="row g-3 mb-4">
                <div class="col-6 col-md-3">
                    <div class="stat-box">
                        <div class="stat">Words</div>
                        <div class="stat-value" id="words">11</div>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="stat-box">
                        <div class="stat">Characters</div>
                        <div class="stat-value" id="chars">117</div>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="stat-box">
                        <div class="stat">Lines</div>
                        <div class="stat-value" id="lines">1</div>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="stat-box">
                        <div class="stat">Sentences</div>
                        <div class="stat-value" id="sentences">2</div>
                    </div>
                </div>
            </div>
            
            <!-- ADVANCED STATS -->
            <div class="row g-3 mb-4">
                <div class="col-6 col-md-3">
                    <div class="stat-box">
                        <div class="stat">Paragraphs</div>
                        <div class="stat-value" id="paras">1</div>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="stat-box">
                        <div class="stat">Unique Words</div>
                        <div class="stat-value" id="unique">25</div>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="stat-box">
                        <div class="stat">Reading Time</div>
                        <div class="stat-value" id="readTime">1 min</div>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="stat-box">
                        <div class="stat">Speaking Time</div>
                        <div class="stat-value" id="speakTime">1 min</div>
                    </div>
                </div>
            </div>
            
            <!-- ADVANCED STATS (HIDDEN BY DEFAULT) -->
            <div id="advancedStats" class="row g-3 mb-4" style="display: none;">
                <div class="col-6 col-md-3">
                    <div class="stat-box">
                        <div class="stat">Longest Word</div>
                        <div class="stat-value" id="longestWord">demonstrate</div>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="stat-box">
                        <div class="stat">Avg Word Length</div>
                        <div class="stat-value" id="avgWordLength">5.2</div>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="stat-box">
                        <div class="stat">Avg Sentence Length</div>
                        <div class="stat-value" id="avgSentenceLength">5.5</div>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="stat-box">
                        <div class="stat">Text Complexity</div>
                        <div class="stat-value" id="textComplexity">Medium</div>
                    </div>
                </div>
            </div>
            
            <!-- TEXT PROGRESS -->
            <div class="mb-4" id="textProgressContainer">
                <div class="slider-label">
                    <span>Text Length Progress</span>
                    <span id="progressPercent">1%</span>
                </div>
                <div class="progress">
                    <div id="textProgress" class="progress-bar bg-success" role="progressbar" style="width: 1%"></div>
                </div>
                <div class="text-center small text-muted mt-1" id="progressText">11 of 1000 words</div>
            </div>
            
            <!-- INLINE AD -->
            <div class="ad-space">Advertisement Space (Inline / Responsive)</div>
            
            <!-- KEYWORDS & FIND -->
            <div class="row g-3 mb-4">
                <div class="col-md-6">
                    <h6 class="fw-semibold"><i class="bi bi-key"></i> Keyword Density</h6>
                    <div class="keyword-box" id="keywords">
                        <div class="keyword"><span>text</span><span>3 (15.8%)</span></div>
                        <div class="keyword"><span>tools</span><span>2 (10.5%)</span></div>
                        <div class="keyword"><span>writing</span><span>1 (5.3%)</span></div>
                        <div class="keyword"><span>features</span><span>1 (5.3%)</span></div>
                        <div class="keyword"><span>pro+</span><span>1 (5.3%)</span></div>
                    </div>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Keyword Count:</span>
                            <span id="keywordCountValue">10</span>
                        </div>
                        <input type="range" class="form-range" id="keywordCount" min="5" max="30" value="10" oninput="updateKeywordCount()">
                    </div>
                    <button class="btn btn-sm btn-outline-info mt-2" onclick="generateWordCloud()"><i class="bi bi-cloud"></i> Generate Word Cloud</button>
                </div>
                <div class="col-md-6">
                    <h6 class="fw-semibold"><i class="bi bi-search"></i> Find & Replace</h6>
                    <input class="form-control mb-2" id="findText" placeholder="Find">
                    <input class="form-control mb-2" id="replaceText" placeholder="Replace">
                    <div class="d-flex gap-2">
                        <button class="btn btn-sm btn-primary" onclick="findReplace()">Replace All</button>
                        <button class="btn btn-sm btn-outline-primary" onclick="findNext()">Find Next</button>
                        <div class="d-flex align-items-center gap-2">
                            <input type="checkbox" class="form-check-input" id="caseSensitive">
                            <label class="form-check-label small" for="caseSensitive">Case-sensitive</label>
                        </div>
                    </div>
                    <div class="mt-2">
                        <button class="btn btn-sm btn-info" onclick="replaceSelected()">Replace Selected</button>
                        <button class="btn btn-sm btn-outline-secondary" onclick="highlightAll()">Highlight All</button>
                    </div>
                    <div class="mt-2 small text-muted" id="findResults"></div>
                </div>
            </div>
            
            <!-- ADVANCED FEATURES (HIDDEN BY DEFAULT) -->
            <div id="advancedFeatures" class="feature-section" style="display: none;">
                <h6 class="fw-semibold mb-3"><i class="bi bi-magic"></i> Advanced Text Tools</h6>
                
                <!-- Text Summary -->
                <div class="mb-3">
                    <button class="btn btn-outline-secondary mb-2" onclick="generateSummary()"><i class="bi bi-file-text"></i> Generate Summary</button>
                    <div class="summary-box" id="summary">This is a sample text to demonstrate the features of Text & Writing Tools Pro+.</div>
                </div>
                
                <!-- Font Tools -->
                <div class="mb-3">
                    <h6 class="fw-semibold"><i class="bi bi-fonts"></i> Font Tools</h6>
                    <div class="d-flex flex-wrap gap-2 mb-2">
                        <button class="btn btn-outline-secondary btn-sm" onclick="increaseFont()"><i class="bi bi-zoom-in"></i> Increase Font</button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="decreaseFont()"><i class="bi bi-zoom-out"></i> Decrease Font</button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="resetFont()"><i class="bi bi-fonts"></i> Reset Font</button>
                        <select class="form-select form-select-sm" style="width: auto;" onchange="changeFontFamily(this.value)">
                            <option value="Poppins">Poppins</option>
                            <option value="Arial">Arial</option>
                            <option value="Georgia">Georgia</option>
                            <option value="Courier New">Courier New</option>
                            <option value="Times New Roman">Times New Roman</option>
                        </select>
                    </div>
                    <div class="font-preview" id="fontPreview">
                        The quick brown fox jumps over the lazy dog.
                    </div>
                </div>
            </div>
            
            <!-- TEXT TRANSFORMATIONS -->
            <h6 class="fw-semibold mt-4"><i class="bi bi-arrow-repeat"></i> Text Transformations</h6>
            <div class="d-flex flex-wrap gap-2 mb-3">
                <button class="btn btn-primary" onclick="analyze()"><i class="bi bi-graph-up"></i> Analyze</button>
                <button class="btn btn-outline-secondary" onclick="toUpper()"><i class="bi bi-type-bold"></i> UPPERCASE</button>
                <button class="btn btn-outline-secondary" onclick="toLower()"><i class="bi bi-type"></i> lowercase</button>
                <button class="btn btn-outline-secondary" onclick="toCapitalize()"><i class="bi bi-type-h1"></i> Capitalize</button>
                <button class="btn btn-outline-secondary" onclick="toTitleCase()"><i class="bi bi-type-h2"></i> Title Case</button>
            </div>
            
            <div class="d-flex flex-wrap gap-2 mb-3">
                <button class="btn btn-warning" onclick="removeSpaces()"><i class="bi bi-text-indent-left"></i> Remove Extra Spaces</button>
                <button class="btn btn-outline-secondary" onclick="removeEmptyLines()"><i class="bi bi-textarea"></i> Remove Empty Lines</button>
                <button class="btn btn-outline-secondary" onclick="sortLines()"><i class="bi bi-sort-alpha-down"></i> Sort Lines A–Z</button>
                <button class="btn btn-outline-secondary" onclick="removeDuplicateLines()"><i class="bi bi-x-circle"></i> Remove Duplicates</button>
            </div>
            
            <div class="d-flex flex-wrap gap-2 mb-3">
                <button class="btn btn-outline-secondary" onclick="reverseText()"><i class="bi bi-arrow-left-right"></i> Reverse Text</button>
                <button class="btn btn-outline-secondary" onclick="reverseLines()"><i class="bi bi-arrow-down-up"></i> Reverse Lines</button>
                <button class="btn btn-outline-secondary" onclick="numberLines()"><i class="bi bi-list-ol"></i> Number Lines</button>
                <button class="btn btn-outline-secondary" onclick="trimEachLine()"><i class="bi bi-scissors"></i> Trim Lines</button>
                <button class="btn btn-outline-secondary" onclick="addBullets()"><i class="bi bi-list-ul"></i> Add Bullets</button>
            </div>
            
            <!-- ACTIONS -->
            <h6 class="fw-semibold mt-4"><i class="bi bi-lightning"></i> Actions</h6>
            <div class="d-flex flex-wrap gap-2 mb-3">
                <button class="btn btn-success" onclick="copyText()"><i class="bi bi-clipboard"></i> Copy</button>
                <button class="btn btn-outline-primary" onclick="downloadMD()"><i class="bi bi-markdown"></i> Markdown</button>
                <button class="btn btn-outline-primary" onclick="downloadJSON()"><i class="bi bi-filetype-json"></i> JSON</button>
                <button class="btn btn-outline-primary" onclick="downloadPDF()"><i class="bi bi-filetype-pdf"></i> PDF</button>
                <button class="btn btn-danger" onclick="clearText()"><i class="bi bi-trash"></i> Clear</button>
            </div>
            
            <!-- IMPORT/EXPORT -->
            <div class="import-export-container">
                <button class="btn btn-outline-primary import-btn" onclick="importFromFile()"><i class="bi bi-file-earmark-arrow-up"></i> Import from File</button>
                <button class="btn btn-outline-primary import-btn" onclick="importFromURL()"><i class="bi bi-link"></i> Import from URL</button>
                <button class="btn btn-outline-primary import-btn" onclick="importFromClipboard()"><i class="bi bi-clipboard-data"></i> Import from Clipboard</button>
                <button class="btn btn-outline-success export-btn" onclick="exportAllData()"><i class="bi bi-box-arrow-down"></i> Export All Data</button>
            </div>
            
            <!-- OUTPUT MESSAGE -->
            <p class="mt-3 fw-semibold text-success output-msg" id="output"></p>
        </div>
        
        <!-- BOTTOM AD -->
        <div class="ad-space">Advertisement Space (Bottom Banner – AdSense Ready)</div>
        
        <!-- FOOTER -->
        <hr class="my-5">
        <p class="text-center text-muted small">© 2025 FreeTools by teamorbits – Pro+ | v2.1</p>
    </div>
    
    <!-- IMPORT MODAL -->
    <div class="modal fade" id="importModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-upload"></i> Import Text</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Import from File</label>
                        <input type="file" id="fileInput" class="form-control" accept=".txt,.html,.md,.json">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Import from URL</label>
                        <input type="url" id="urlInput" class="form-control" placeholder="https://example.com/text.txt">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Direct Text Input</label>
                        <textarea id="directInput" class="form-control" rows="4" placeholder="Paste text directly here..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="processImport()">Import Text</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- WORD CLOUD MODAL -->
    <div class="modal fade" id="wordCloudModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-cloud"></i> Word Cloud</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="word-cloud-container" id="wordCloud"></div>
                    <div class="mt-3">
                        <button class="btn btn-primary" onclick="regenerateWordCloud()"><i class="bi bi-arrow-clockwise"></i> Regenerate</button>
                        <button class="btn btn-success" onclick="saveWordCloud()"><i class="bi bi-download"></i> Save as Image</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Core variables
        const textArea = document.getElementById('text');
        let history = [];
        let historyIndex = -1;
        let wordCloudData = [];
        let fontSize = 15;
        
        // Initialize Bootstrap modals
        const importModal = new bootstrap.Modal(document.getElementById('importModal'));
        const wordCloudModalInstance = new bootstrap.Modal(document.getElementById('wordCloudModal'));
        
        // Initialize the application
        function init() {
            // Load saved text from localStorage
            const savedText = localStorage.getItem('textToolsText');
            if (savedText) {
                textArea.value = savedText;
            }
            
            // Save initial state to history
            saveHistory();
            
            // Analyze the initial text
            analyze();
            
            // Set up event listeners
            setupEventListeners();
            
            // Load settings
            loadSettings();
            
            // Show welcome message
            setTimeout(() => {
                if (!localStorage.getItem('welcomeShown')) {
                    showMessage('Welcome to Text & Writing Tools Pro+! Start typing or paste text to analyze.');
                    localStorage.setItem('welcomeShown', 'true');
                }
            }, 1000);
        }
        
        // Set up event listeners
        function setupEventListeners() {
            // Text area input
            textArea.addEventListener('input', function() {
                saveHistory();
                localStorage.setItem('textToolsText', textArea.value);
                analyze();
                updateLiveWordCount();
            });
            
            // Keyboard shortcuts
            textArea.addEventListener('keydown', function(e) {
                // Ctrl+Z for undo
                if (e.ctrlKey && e.key === 'z') {
                    e.preventDefault();
                    undo();
                }
                // Ctrl+Y for redo
                if (e.ctrlKey && e.key === 'y') {
                    e.preventDefault();
                    redo();
                }
                // Ctrl+F for find
                if (e.ctrlKey && e.key === 'f') {
                    e.preventDefault();
                    document.getElementById('findText').focus();
                }
            });
            
            // File input
            document.getElementById('fileInput').addEventListener('change', function() {
                if (this.files.length > 0) {
                    readFile(this.files[0]);
                }
            });
        }
        
        // History management
        function saveHistory() {
            // Remove future history if we're not at the end
            if (historyIndex < history.length - 1) {
                history = history.slice(0, historyIndex + 1);
            }
            
            // Add current state to history
            history.push(textArea.value);
            historyIndex = history.length - 1;
            
            // Limit history size
            if (history.length > 50) {
                history.shift();
                historyIndex--;
            }
        }
        
        function undo() {
            if (historyIndex > 0) {
                historyIndex--;
                textArea.value = history[historyIndex];
                analyze();
                showMessage('Undo performed');
            }
        }
        
        function redo() {
            if (historyIndex < history.length - 1) {
                historyIndex++;
                textArea.value = history[historyIndex];
                analyze();
                showMessage('Redo performed');
            }
        }
        
        // Core analysis function
        function analyze() {
            const text = textArea.value;
            const words = text.trim() ? text.trim().split(/\s+/) : [];
            const lines = text ? text.split('\n') : [];
            const sentences = text.match(/[^.!?]+[.!?]+/g) || [];
            const paragraphs = text ? text.split(/\n\s*\n/).filter(p => p.trim()) : [];
            
            // Update basic stats
            document.getElementById('words').textContent = words.length;
            document.getElementById('chars').textContent = text.length;
            document.getElementById('lines').textContent = lines.length;
            document.getElementById('sentences').textContent = sentences.length;
            document.getElementById('paras').textContent = paragraphs.length;
            document.getElementById('unique').textContent = [...new Set(words.map(w => w.toLowerCase()))].length;
            document.getElementById('readTime').textContent = Math.ceil(words.length / 200) + ' min';
            document.getElementById('speakTime').textContent = Math.ceil(words.length / 130) + ' min';
            
            // Update advanced stats
            updateAdvancedStats(text, words, sentences);
            
            // Update keyword density
            updateKeywordDensity(text);
            
            // Update progress
            updateTextProgress(words.length);
            
            // Update live word count
            updateLiveWordCount();
        }
        
        function updateAdvancedStats(text, words, sentences) {
            // Longest word
            if (words.length > 0) {
                const longestWord = words.reduce((a, b) => a.length > b.length ? a : b);
                document.getElementById('longestWord').textContent = longestWord.length > 15 ? 
                    longestWord.substring(0, 12) + '...' : longestWord;
                
                // Average word length
                const avgWordLength = words.reduce((sum, word) => sum + word.length, 0) / words.length;
                document.getElementById('avgWordLength').textContent = avgWordLength.toFixed(1);
            } else {
                document.getElementById('longestWord').textContent = '-';
                document.getElementById('avgWordLength').textContent = '0';
            }
            
            // Average sentence length
            if (sentences.length > 0) {
                const sentenceWords = sentences.map(s => s.trim().split(/\s+/).length);
                const avgSentenceLength = sentenceWords.reduce((a, b) => a + b) / sentences.length;
                document.getElementById('avgSentenceLength').textContent = avgSentenceLength.toFixed(1);
                
                // Text complexity
                let complexity = 'Easy';
                if (avgSentenceLength > 15) complexity = 'Difficult';
                else if (avgSentenceLength > 10) complexity = 'Medium';
                document.getElementById('textComplexity').textContent = complexity;
            } else {
                document.getElementById('avgSentenceLength').textContent = '0';
                document.getElementById('textComplexity').textContent = '-';
            }
        }
        
        function updateKeywordDensity(text) {
            if (!text.trim()) {
                document.getElementById('keywords').innerHTML = '<div class="text-muted">No data</div>';
                return;
            }
            
            const words = text.toLowerCase().match(/\b[a-z]{3,}\b/g) || [];
            const wordCount = words.length;
            
            if (wordCount === 0) {
                document.getElementById('keywords').innerHTML = '<div class="text-muted">No keywords found</div>';
                return;
            }
            
            // Count word frequencies
            const frequencies = {};
            words.forEach(word => {
                frequencies[word] = (frequencies[word] || 0) + 1;
            });
            
            // Sort by frequency
            const sorted = Object.entries(frequencies).sort((a, b) => b[1] - a[1]);
            
            // Get the number of keywords to show
            const keywordCount = parseInt(document.getElementById('keywordCount').value) || 10;
            const topKeywords = sorted.slice(0, keywordCount);
            
            // Display keywords
            let html = '';
            topKeywords.forEach(([word, count]) => {
                const percentage = ((count / wordCount) * 100).toFixed(1);
                html += `<div class="keyword"><span>${word}</span><span>${count} (${percentage}%)</span></div>`;
            });
            
            document.getElementById('keywords').innerHTML = html;
        }
        
        function updateKeywordCount() {
            const value = document.getElementById('keywordCount').value;
            document.getElementById('keywordCountValue').textContent = value;
            updateKeywordDensity(textArea.value);
        }
        
        function updateTextProgress(wordCount) {
            const goal = 1000;
            const percent = Math.min(100, Math.round((wordCount / goal) * 100));
            
            document.getElementById('textProgress').style.width = percent + '%';
            document.getElementById('progressPercent').textContent = percent + '%';
            document.getElementById('progressText').textContent = `${wordCount} of ${goal} words`;
        }
        
        function updateLiveWordCount() {
            const wordCount = textArea.value.trim() ? textArea.value.trim().split(/\s+/).length : 0;
            document.getElementById('liveWordCount').textContent = `${wordCount} words`;
        }
        
        // Find and replace functions
        function findReplace() {
            const findText = document.getElementById('findText').value;
            const replaceText = document.getElementById('replaceText').value;
            const caseSensitive = document.getElementById('caseSensitive').checked;
            
            if (!findText) {
                showMessage('Please enter text to find');
                return;
            }
            
            saveHistory();
            
            if (caseSensitive) {
                textArea.value = textArea.value.split(findText).join(replaceText);
            } else {
                const regex = new RegExp(findText.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'gi');
                textArea.value = textArea.value.replace(regex, replaceText);
            }
            
            analyze();
            showMessage(`Replaced all occurrences of "${findText}"`);
        }
        
        function findNext() {
            const findText = document.getElementById('findText').value;
            const caseSensitive = document.getElementById('caseSensitive').checked;
            
            if (!findText) {
                showMessage('Please enter text to find');
                return;
            }
            
            const text = textArea.value;
            const searchText = caseSensitive ? findText : findText.toLowerCase();
            const content = caseSensitive ? text : text.toLowerCase();
            
            // Start searching from current cursor position
            const startPos = textArea.selectionStart;
            const pos = content.indexOf(searchText, startPos);
            
            if (pos >= 0) {
                textArea.focus();
                textArea.setSelectionRange(pos, pos + findText.length);
                showMessage(`Found at position ${pos}`);
            } else {
                // Search from beginning if not found
                const posFromStart = content.indexOf(searchText);
                if (posFromStart >= 0) {
                    textArea.focus();
                    textArea.setSelectionRange(posFromStart, posFromStart + findText.length);
                    showMessage(`Found at position ${posFromStart}`);
                } else {
                    showMessage('Text not found');
                }
            }
        }
        
        function replaceSelected() {
            const selection = textArea.value.substring(textArea.selectionStart, textArea.selectionEnd);
            const replaceText = document.getElementById('replaceText').value;
            
            if (!selection) {
                showMessage('Please select text first');
                return;
            }
            
            saveHistory();
            const before = textArea.value.substring(0, textArea.selectionStart);
            const after = textArea.value.substring(textArea.selectionEnd);
            textArea.value = before + replaceText + after;
            
            analyze();
            showMessage('Replaced selected text');
        }
        
        function highlightAll() {
            const findText = document.getElementById('findText').value;
            
            if (!findText) {
                showMessage('Please enter text to find');
                return;
            }
            
            const text = textArea.value;
            const regex = new RegExp(findText.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'gi');
            const matches = [...text.matchAll(regex)];
            
            if (matches.length === 0) {
                document.getElementById('findResults').innerHTML = '<div class="text-warning">No matches found</div>';
            } else {
                document.getElementById('findResults').innerHTML = `<div class="text-success">Found ${matches.length} matches</div>`;
                showMessage(`Found ${matches.length} matches`);
            }
        }
        
        // Text transformation functions
        function removeSpaces() {
            saveHistory();
            textArea.value = textArea.value.replace(/\s+/g, ' ').trim();
            analyze();
            showMessage('Extra spaces removed');
        }
        
        function removeEmptyLines() {
            saveHistory();
            textArea.value = textArea.value.split('\n').filter(line => line.trim()).join('\n');
            analyze();
            showMessage('Empty lines removed');
        }
        
        function sortLines() {
            saveHistory();
            textArea.value = textArea.value.split('\n').sort().join('\n');
            analyze();
            showMessage('Lines sorted alphabetically');
        }
        
        function removeDuplicateLines() {
            saveHistory();
            textArea.value = [...new Set(textArea.value.split('\n'))].join('\n');
            analyze();
            showMessage('Duplicate lines removed');
        }
        
        function reverseText() {
            saveHistory();
            textArea.value = textArea.value.split('').reverse().join('');
            analyze();
            showMessage('Text reversed');
        }
        
        function reverseLines() {
            saveHistory();
            textArea.value = textArea.value.split('\n').reverse().join('\n');
            analyze();
            showMessage('Lines reversed');
        }
        
        function numberLines() {
            saveHistory();
            textArea.value = textArea.value.split('\n').map((line, index) => `${index + 1}. ${line}`).join('\n');
            analyze();
            showMessage('Lines numbered');
        }
        
        function trimEachLine() {
            saveHistory();
            textArea.value = textArea.value.split('\n').map(line => line.trim()).join('\n');
            analyze();
            showMessage('Lines trimmed');
        }
        
        function addBullets() {
            saveHistory();
            textArea.value = textArea.value.split('\n').map(line => line.trim() ? '• ' + line : '').join('\n');
            analyze();
            showMessage('Bullets added');
        }
        
        function toUpper() {
            saveHistory();
            textArea.value = textArea.value.toUpperCase();
            analyze();
            showMessage('Converted to uppercase');
        }
        
        function toLower() {
            saveHistory();
            textArea.value = textArea.value.toLowerCase();
            analyze();
            showMessage('Converted to lowercase');
        }
        
        function toCapitalize() {
            saveHistory();
            textArea.value = textArea.value.toLowerCase().replace(/\b\w/g, char => char.toUpperCase());
            analyze();
            showMessage('Text capitalized');
        }
        
        function toTitleCase() {
            saveHistory();
            textArea.value = textArea.value.toLowerCase().replace(/\b\w+/g, word => {
                const smallWords = ['a', 'an', 'and', 'as', 'at', 'but', 'by', 'for', 'in', 'of', 'on', 'or', 'the', 'to', 'with'];
                if (smallWords.includes(word)) return word;
                return word.charAt(0).toUpperCase() + word.slice(1);
            });
            // Capitalize first word
            textArea.value = textArea.value.charAt(0).toUpperCase() + textArea.value.slice(1);
            analyze();
            showMessage('Converted to title case');
        }
        
        // Advanced features
        function generateSummary() {
            const sentences = textArea.value.match(/[^.!?]+[.!?]+/g) || [];
            if (sentences.length === 0) {
                document.getElementById('summary').innerHTML = 'No sentences found to summarize.';
                return;
            }
            
            const summaryLength = Math.max(1, Math.ceil(sentences.length / 3));
            const summary = sentences.slice(0, summaryLength).join(' ');
            
            document.getElementById('summary').innerHTML = `<strong>Summary:</strong> ${summary}`;
            showMessage('Summary generated');
        }
        
        function increaseFont() {
            fontSize += 1;
            textArea.style.fontSize = fontSize + 'px';
            updateFontPreview();
            saveSetting('fontSize', fontSize);
            showMessage(`Font size: ${fontSize}px`);
        }
        
        function decreaseFont() {
            if (fontSize > 10) {
                fontSize -= 1;
                textArea.style.fontSize = fontSize + 'px';
                updateFontPreview();
                saveSetting('fontSize', fontSize);
                showMessage(`Font size: ${fontSize}px`);
            }
        }
        
        function resetFont() {
            fontSize = 15;
            textArea.style.fontSize = fontSize + 'px';
            updateFontPreview();
            saveSetting('fontSize', fontSize);
            showMessage('Font size reset');
        }
        
        function changeFontFamily(family) {
            textArea.style.fontFamily = family;
            updateFontPreview();
            saveSetting('fontFamily', family);
            showMessage(`Font changed to ${family}`);
        }
        
        function updateFontPreview() {
            document.getElementById('fontPreview').style.fontSize = fontSize + 'px';
            document.getElementById('fontPreview').style.fontFamily = textArea.style.fontFamily || 'Poppins';
        }
        
        // Word cloud functions
        function generateWordCloud() {
            const text = textArea.value.toLowerCase();
            if (!text.trim()) {
                showMessage('No text to generate word cloud');
                return;
            }
            
            const words = text.match(/\b[a-z]{4,}\b/g) || [];
            if (words.length === 0) {
                showMessage('No words long enough for word cloud');
                return;
            }
            
            // Count word frequencies
            const frequencies = {};
            words.forEach(word => {
                frequencies[word] = (frequencies[word] || 0) + 1;
            });
            
            // Sort by frequency and take top 50
            wordCloudData = Object.entries(frequencies)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 50);
            
            displayWordCloud();
            wordCloudModalInstance.show();
        }
        
        function displayWordCloud() {
            const container = document.getElementById('wordCloud');
            container.innerHTML = '';
            
            if (wordCloudData.length === 0) {
                container.innerHTML = '<div class="text-center text-muted">No words to display</div>';
                return;
            }
            
            const maxCount = wordCloudData[0][1];
            
            wordCloudData.forEach(([word, count]) => {
                const size = 16 + (count / maxCount) * 32;
                const color = getRandomColor();
                const opacity = 0.5 + (count / maxCount) * 0.5;
                const rotation = Math.random() * 30 - 15;
                
                const span = document.createElement('span');
                span.textContent = word;
                span.style.fontSize = `${size}px`;
                span.style.color = color;
                span.style.opacity = opacity;
                span.style.transform = `rotate(${rotation}deg)`;
                span.style.display = 'inline-block';
                span.style.margin = '5px';
                span.style.padding = '2px 5px';
                span.style.cursor = 'pointer';
                span.title = `Frequency: ${count}`;
                span.onclick = () => {
                    document.getElementById('findText').value = word;
                    findNext();
                };
                
                container.appendChild(span);
            });
        }
        
        function getRandomColor() {
            const colors = ['#4a6bff', '#28a745', '#ffc107', '#dc3545', '#6f42c1', '#20c997', '#fd7e14', '#e83e8c'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        function regenerateWordCloud() {
            displayWordCloud();
            showMessage('Word cloud regenerated');
        }
        
        function saveWordCloud() {
            // Create a temporary canvas
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 800;
            canvas.height = 400;
            
            // Draw background
            ctx.fillStyle = document.documentElement.classList.contains('dark') ? '#1e293b' : '#f8f9fd';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            if (wordCloudData.length === 0) {
                showMessage('No word cloud data to save');
                return;
            }
            
            const maxCount = wordCloudData[0][1];
            
            // Draw words
            wordCloudData.forEach(([word, count], index) => {
                const size = 16 + (count / maxCount) * 32;
                const color = getRandomColor();
                const opacity = 0.5 + (count / maxCount) * 0.5;
                
                ctx.font = `${size}px Arial`;
                ctx.fillStyle = color;
                ctx.globalAlpha = opacity;
                
                // Simple grid layout
                const x = 50 + (index % 10) * 70;
                const y = 50 + Math.floor(index / 10) * 50;
                
                ctx.fillText(word, x, y);
                ctx.globalAlpha = 1;
            });
            
            // Save as image
            const link = document.createElement('a');
            link.download = 'word-cloud.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
            showMessage('Word cloud saved as image');
        }
        
        // Import/Export functions
        function openImportModal() {
            importModal.show();
        }
        
        function importFromFile() {
            document.getElementById('fileInput').click();
        }
        
        function importFromURL() {
            const url = prompt('Enter URL to import from:', 'https://');
            if (url) {
                fetch(url)
                    .then(response => {
                        if (!response.ok) throw new Error('Network response was not ok');
                        return response.text();
                    })
                    .then(text => {
                        saveHistory();
                        textArea.value = text;
                        analyze();
                        importModal.hide();
                        showMessage('Text imported from URL');
                    })
                    .catch(error => {
                        showMessage('Failed to import from URL: ' + error.message);
                    });
            }
        }
        
        function importFromClipboard() {
            navigator.clipboard.readText()
                .then(text => {
                    saveHistory();
                    textArea.value = text;
                    analyze();
                    showMessage('Text imported from clipboard');
                })
                .catch(error => {
                    showMessage('Failed to read clipboard: ' + error.message);
                });
        }
        
        function processImport() {
            // Check direct input first
            const directInput = document.getElementById('directInput').value;
            if (directInput) {
                saveHistory();
                textArea.value = directInput;
                analyze();
                importModal.hide();
                showMessage('Text imported from input');
                return;
            }
            
            // Check URL input
            const urlInput = document.getElementById('urlInput').value;
            if (urlInput) {
                importFromURL();
                return;
            }
            
            showMessage('Please select an import method');
        }
        
        function readFile(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                saveHistory();
                textArea.value = e.target.result;
                analyze();
                importModal.hide();
                showMessage(`Imported from ${file.name}`);
            };
            reader.onerror = function() {
                showMessage('Failed to read file');
            };
            reader.readAsText(file);
        }
        
        function exportAllData() {
            const data = {
                text: textArea.value,
                stats: {
                    words: document.getElementById('words').textContent,
                    characters: document.getElementById('chars').textContent,
                    lines: document.getElementById('lines').textContent,
                    sentences: document.getElementById('sentences').textContent,
                    paragraphs: document.getElementById('paras').textContent,
                    uniqueWords: document.getElementById('unique').textContent,
                    readingTime: document.getElementById('readTime').textContent,
                    speakingTime: document.getElementById('speakTime').textContent
                },
                timestamp: new Date().toISOString(),
                version: 'Text Tools Pro+ v2.1'
            };
            
            download(JSON.stringify(data, null, 2), 'text-tools-export.json', 'application/json');
            showMessage('All data exported');
        }
        
        // Download functions
        function downloadTXT() {
            download(textArea.value, 'text.txt', 'text/plain');
            showMessage('TXT file downloaded');
        }
        
        function downloadHTML() {
            const html = `<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Exported Text</title></head><body><pre>${escapeHtml(textArea.value)}</pre></body></html>`;
            download(html, 'text.html', 'text/html');
            showMessage('HTML file downloaded');
        }
        
        function downloadMD() {
            download(textArea.value, 'text.md', 'text/markdown');
            showMessage('Markdown file downloaded');
        }
        
        function downloadJSON() {
            const data = {
                text: textArea.value,
                stats: {
                    words: document.getElementById('words').textContent,
                    characters: document.getElementById('chars').textContent,
                    lines: document.getElementById('lines').textContent,
                    sentences: document.getElementById('sentences').textContent,
                    paragraphs: document.getElementById('paras').textContent,
                    uniqueWords: document.getElementById('unique').textContent,
                    readingTime: document.getElementById('readTime').textContent,
                    speakingTime: document.getElementById('speakTime').textContent
                },
                timestamp: new Date().toISOString()
            };
            download(JSON.stringify(data, null, 2), 'text.json', 'application/json');
            showMessage('JSON file downloaded');
        }
        
        function downloadPDF() {
            // Open print dialog for PDF generation
            window.print();
            showMessage('PDF generated (use print to save as PDF)');
        }
        
        function copyText() {
            navigator.clipboard.writeText(textArea.value)
                .then(() => showMessage('Copied to clipboard'))
                .catch(() => showMessage('Failed to copy'));
        }
        
        function clearText() {
            if (confirm('Are you sure you want to clear all text?')) {
                saveHistory();
                textArea.value = '';
                analyze();
                showMessage('Text cleared');
            }
        }
        
        function toggleAdvanced() {
            const advancedStats = document.getElementById('advancedStats');
            const advancedFeatures = document.getElementById('advancedFeatures');
            const btn = event.target;
            
            if (advancedStats.style.display === 'none') {
                advancedStats.style.display = 'flex';
                advancedFeatures.style.display = 'block';
                btn.innerHTML = '<i class="bi bi-gear-fill"></i> Advanced';
                saveSetting('advancedEnabled', true);
                showMessage('Advanced features enabled');
            } else {
                advancedStats.style.display = 'none';
                advancedFeatures.style.display = 'none';
                btn.innerHTML = '<i class="bi bi-gear"></i> Advanced';
                saveSetting('advancedEnabled', false);
                showMessage('Advanced features disabled');
            }
        }
        
        function toggleDark() {
            const isDark = document.documentElement.classList.toggle('dark');
            const btn = event.target;
            btn.innerHTML = isDark ? '<i class="bi bi-sun"></i> Light' : '<i class="bi bi-moon"></i> Dark';
            saveSetting('darkMode', isDark);
            showMessage(isDark ? 'Dark mode enabled' : 'Light mode enabled');
        }
        
        // Utility functions
        function download(data, filename, type) {
            const blob = new Blob([data], { type });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
        }
        
        function escapeHtml(text) {
            return text
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#039;');
        }
        
        function showMessage(message) {
            const output = document.getElementById('output');
            output.textContent = message;
            output.classList.add('fade-in');
            
            setTimeout(() => {
                output.textContent = '';
                output.classList.remove('fade-in');
            }, 3000);
        }
        
        // Settings management
        function saveSetting(key, value) {
            const settings = JSON.parse(localStorage.getItem('textToolsSettings') || '{}');
            settings[key] = value;
            localStorage.setItem('textToolsSettings', JSON.stringify(settings));
        }
        
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('textToolsSettings') || '{}');
            
            if (settings.darkMode) {
                document.documentElement.classList.add('dark');
                document.querySelector('.btn-outline-dark').innerHTML = '<i class="bi bi-sun"></i> Light';
            }
            
            if (settings.fontSize) {
                fontSize = settings.fontSize;
                textArea.style.fontSize = fontSize + 'px';
            }
            
            if (settings.fontFamily) {
                textArea.style.fontFamily = settings.fontFamily;
            }
            
            if (settings.advancedEnabled) {
                document.getElementById('advancedStats').style.display = 'flex';
                document.getElementById('advancedFeatures').style.display = 'block';
                document.querySelector('.btn-outline-info').innerHTML = '<i class="bi bi-gear-fill"></i> Advanced';
            }
        }
        
        // Initialize on load
        window.addEventListener('DOMContentLoaded', init);
        
        // Export functions to global scope
        window.undo = undo;
        window.redo = redo;
        window.analyze = analyze;
        window.findReplace = findReplace;
        window.findNext = findNext;
        window.replaceSelected = replaceSelected;
        window.highlightAll = highlightAll;
        window.removeSpaces = removeSpaces;
        window.removeEmptyLines = removeEmptyLines;
        window.sortLines = sortLines;
        window.removeDuplicateLines = removeDuplicateLines;
        window.reverseText = reverseText;
        window.reverseLines = reverseLines;
        window.numberLines = numberLines;
        window.trimEachLine = trimEachLine;
        window.addBullets = addBullets;
        window.toUpper = toUpper;
        window.toLower = toLower;
        window.toCapitalize = toCapitalize;
        window.toTitleCase = toTitleCase;
        window.generateSummary = generateSummary;
        window.increaseFont = increaseFont;
        window.decreaseFont = decreaseFont;
        window.resetFont = resetFont;
        window.changeFontFamily = changeFontFamily;
        window.generateWordCloud = generateWordCloud;
        window.regenerateWordCloud = regenerateWordCloud;
        window.saveWordCloud = saveWordCloud;
        window.openImportModal = openImportModal;
        window.importFromFile = importFromFile;
        window.importFromURL = importFromURL;
        window.importFromClipboard = importFromClipboard;
        window.processImport = processImport;
        window.exportAllData = exportAllData;
        window.downloadTXT = downloadTXT;
        window.downloadHTML = downloadHTML;
        window.downloadMD = downloadMD;
        window.downloadJSON = downloadJSON;
        window.downloadPDF = downloadPDF;
        window.copyText = copyText;
        window.clearText = clearText;
        window.toggleAdvanced = toggleAdvanced;
        window.toggleDark = toggleDark;
    </script>
</body>
</html>
